---
date: '2025-03-08'
draft: true
title: 'We were all trying way too hard at DeepRacer'
showToc: false
tags: ['machine learning', 'aws']
categories: ["Tech", "AWS"]
summary: The reward function you wanted was inside you the whole time
---

![Go around again!](/images/doggo.png)

## How a reward function made hundreds of dollars off the back of a typo

> *The AWS DeepRacer League was the world's first global autonomous racing league, introduced by Amazon Web Services (AWS) to make machine learning (ML) more accessible and engaging. Participants developed reinforcement learning models to autonomously navigate 1/18th-scale race cars around tracks, either in simulated environments or on physical tracks.*
>
> -- *ChatGPT*

I introduced one of my mentees to DeepRacer a couple years back to help get him some face time with the rest of my team and get his hands dirty with reinforcement learning.
I was encouraged by how quickly he picked it up, and eventually worried for his emotional well-being as he got really into it.
There have been plenty of times I introduced him to a concept and he ended up teaching *me* more about it, but this was definitely the fastest turnaround for that process.
I suspect that's because it's more fun than most of platform engineering.

### Wait, I forgot what DeepRacer is

DeepRacer is an abstraction of Sagemaker that wrapped a reinforcement learning model in what my high school math teacher would have called a video game. It's very easy to pick up - even the default inputs will get you reasonably good results - but it has a logarithmic learning curve, and the diminishing returns keep most of us out of the upper echelons of competition.

Inputs consist of a handful of hyperparameters (not everything that would normally be available, the managed service abstracts a lot) and a Python reward function meant to calculate success out of a couple dozen possible inputs including track position, speed, steering wheel orientation, or detected obstacles.

Races might happen in two contexts:

- Private (corporate, university, etc)
- Public (the DeepRacer League)

The DeepRacer League was shut down last year, so the prize money has dried up, but *until the very end* this intern was finishing in the top 10% across North America more often than not. It turned out he almost always used the exact same reward function he came up with at our first corporate race. It was a fascinating puzzle: None of us could figure out just what was so special about this logic, but none of us could outperform it either.
